<!DOCTYPE html>
<html>
	<head>
		<title>Transit Choices</title>
		<script src="../external/jquery/2.1.1/jquery.js"></script>
		<style>
			#map { height: 100%; }
			html, body { height: 100%; margin: 0; padding: 0; }
		</style>
	</head>
	<body>
		<div id="map"></div>
		<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCbuQ-55QIXPuJRvcNGIvTpEwL_qDdJsMo&libraries=drawing"></script>
		<script type="text/javascript">
			jQuery(function($) {
				var map = new google.maps.Map(document.getElementById('map'), {
					center: {lat: 42.35, lng: -71.05},
					zoom: 12
				});
				
				var drawingManager = new google.maps.drawing.DrawingManager({
					drawingControl: true,
					drawingControlOptions: {
						position: google.maps.ControlPosition.TOP_CENTER,
						drawingModes: ['polygon', 'polyline', 'rectangle']
					},
				});
				drawingManager.setMap(map);
				
				google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
					console.log(event.type);
					
					
					var data = [];
					switch (event.type) {
						case "polygon":
							event.overlay.getPaths().forEach(function(path) {
								var cur = [];
								path.forEach(function(latlng) {
									cur.push([latlng.lng(), latlng.lat()]);
								});
								data.push(cur);
							});
							break;
						
						case "polyline":
							event.overlay.getPath().forEach(function(latlng) {
								data.push([latlng.lng(), latlng.lat()]);
							});
							break;
					}
					
					console.log(data);
					console.log(JSON.stringify(data));
				});
			});
		</script>
	</body>
</html>
