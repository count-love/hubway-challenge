<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <title>Hubway</title>

    <link rel="stylesheet" href="external/bootstrap/3.3.7/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="external/leaflet/1.0.3/leaflet.css" type="text/css">
    <link rel="stylesheet" href="story/story.css" type="text/css">

    <!-- libraries for page-->
    <script src="external/jquery/2.1.1/jquery.js"></script>
    <script src="external/jquery-ui/1.12.1/jquery-ui.js"></script> <!-- SIMPLIFY! just for easing -->
    <script src="external/bootstrap/3.3.7/bootstrap.js"></script> <!-- potentially simplify, only use collapse -->
    <script src="external/leaflet/1.0.3/leaflet.js"></script>
    <script src="external/jquery.mousewheel/3.1.13/jquery.mousewheel.js"></script>

    <!-- for transit -->
    <script src="external/d3/4.6.0/d3.js"></script> <!-- potentially simplify, use geo shape, path, scale, ?? -->
    <script src="external/d3-contour/d3-contour.js"></script>
    <script src="external/leaflet-curve/leaflet.curve.js"></script>

    <!-- for exploration -->
    <script src="external/jdataview/2.5.0/jdataview.js"></script>
    <script src="external/jbinary/2.1.3/jbinary.js"></script>

    <!-- local javascript for transit -->
    <script src="directions/transit-layer.js"></script>

    <!-- for explore -->
    <script src="datasource.js"></script>
    <script src="explore.js"></script>

    <!-- for page -->
    <script src="story/story.js"></script>
    <script src="story/story-data.js"></script>
</head>
<body>
<div id="map"></div>
<div id="sidebar-tabs">
    <!-- TODO: replace with a little logo and an about link? -->
    <h1>Hubway Challenge</h1>
    <ul class="nav nav-tabs nav-justified">
        <li role="presentation" class="active"><a href="#" data-story-mode="story">Findings</a></li>
        <li role="presentation"><a href="#" data-story-mode="explore">Explore</a></li>
    </ul>
</div>
<div class="sidebar" id="sidebar-story">
    <div id="story">
        <div class="story-container">
            <div class="story-pane" data-pane="intro">
                <h2>What is extraordinary?</h2>
                <div class="story-body">
                    <p>As engineers and scientists with a keen interest in civic responsibility and public policy, we
                        searched through the last six years of Hubway data to find the unusual and the extraordinary.
                        With the curiosity of a five-year old, we asked "Where?" and “Why?” and "How?" at every turn of
                        our exploration. Please join us on our adventure through five million Hubway trips as we share
                        what we asked, what we learned, and what we built.</p>
                </div>
            </div>
            <div class="story-pane" data-pane="under-util-1">
                <h2>Are any stations underutilized inside the city?</h2>
                <div class="story-body">
                    <p>By plotting total <a data-story-alt="default">starts</a> and <a data-story-alt="stops">stops</a>
                        for each station, we confirmed our intuition that stations in
                        the middle of the Hubway network typically have the highest number of riders (and stations at
                        the edge of the Hubway network have the fewest). We wondered if we could find any stations that
                        broke this pattern: are there any stations inside the city that are underused relative to the
                        stations nearby? And if so, why?</p>
                </div>
            </div>
            <div class="story-pane" data-pane="under-util-2">
                <h2>Are any stations underutilized inside the city?</h2>
                <div class="story-body">
                    <p>To answer this question, we measured each station’s “utilization” by counting the number of
                        starts and stops and dividing by the number of docks at the station.</p>
                </div>
            </div>
            <div class="story-pane" data-pane="under-util-3"><!-- potentially combine with previous? -->
                <h2>Are any stations underutilized inside the city?</h2>
                <div class="story-body">
                    <p>Then, we searched for stations with unusually small “utilization” rates by grouping (clustering)
                        together stations based on their utilization rates and searching for small circles surrounded by
                        large circles. We found the following odd stations: Dana Park, in Cambridgeport; Third/Binney,
                        Sixth/Binney, and Kendall St. in East Cambridge; New Balance, on Newbury St.; and Brookline at
                        Burlington, near Fenway.</p>
                </div>
            </div>

            <div class="story-pane" data-pane="under-util-dana-park">
                <h2>Dana Park, Cambridge</h2>
                <div class="story-body">
                    <p>We estimated average commute times based on the Hubway data and combined this information with
                        walking and public transit data to determine the fastest mode of transportation from any
                        arbitrary start location in the greater Boston area to any other location. From Cambridgeport,
                        Hubway often is the fastest mode of transportation to Somerville, Cambridge, Boston, and
                        Brookline. Only a few distant destinations, like Chelsea and East Boston, are faster to get to
                        via subway. Given this time advantage, why is the Dana Park station utilized so little relative
                        to other nearby stations?</p>
                </div>
            </div>

            <div class="story-pane" data-pane="under-util-east-cambridge">
                <h2>East Cambridge</h2>
                <div class="story-body">
                    <p>East Cambridge exhibits similar trends to Cambridgeport: it is relatively underserved by public 
                    transportation based on commute times, and Hubway often is the fastest mode of transit. Why are the 
                    Kendall area stations underused?</p>
                </div>
            </div>
            
            <div class="story-pane" data-pane="under-util-brookline">
                <h2>Brookline at Burlington St</h2>
                <div class="story-body">
                    <p>Brookline at Burlington, near Fenway, is <a data-story-alt="default">oddly underutilized</a>. 
                    Additionally, <a data-story-alt="popular">the most popular routes from this station</a> are to relatively far stations. Perhaps the 
                    dead-end location of this station makes it inconvenient to access or difficult to discover?</p>
                </div>
            </div>
            
            <div class="story-pane" data-pane="under-util-boston">
                <h2>Winter Availability in Boston</h2>
                <div class="story-body">
                    <p>Analyzing utilization rates also led us to wonder why Boston shuts down some of its Hubway stations 
                    in the winter when Cambridge does not. <a data-story-alt="default">Utilization rates for Cambridge and Boston</a>
                    are fairly similar, and although <a data-story-alt="winter">winter utilization</a> is the lowest of any time of the year, riders 
                    still use Hubway in Cambridge. Perhaps if Boston left its stations open, riders would continue to use those
                    stations as well?</p>
                </div>
            </div>
                        
        </div>
        <div class="story-nav story-prev"><a href="#" data-story-nav="prev">Previous</a></div>
        <div class="story-nav story-next"><a href="#" data-story-nav="next">Next</a></div>
    </div>
</div>
<div class="sidebar" id="sidebar-tools" style="display:none;">
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="tool-explore-head">
            <h4 class="panel-title"><a role="button" data-toggle="collapse" href="#tool-explore" aria-expanded="true" aria-controls="tool-explore">Explore Trips</a></h4>
        </div>
        <div id="tool-explore" class="panel-collapse collapse" role="tabpanel" aria-labelledby="tool-explore-head" data-story-layer="explore">
            <div class="panel-body">
                <!-- start explore interface -->
                <div class="filter btn-group" role="button">
                    <button class="btn btn-default btn-sm js_query" id="js_stations_reset">Reset</button>

                    <div class="btn-group" role="button">
                        <button class="btn btn-default btn-sm btn-group dropdown-toggle" type="button" id="js_stations" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Stations
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenu1" id="js_stationList"></ul>
                    </div>

                    <div class="btn-group" role="button">
                        <button class="btn btn-default btn-sm btn-group dropdown-toggle" type="button" id="js_kMeans" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Clusters
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenu2" id="js_kMeansGroups"></ul>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-default btn-sm btn-group" id="js_markerSize_minus">-</button>
                        <button class="btn btn-default btn-sm btn-group" id="js_markerSize_plus">+</button>
                    </div>
                    
                </div>

                <div class="filter" id="js_queries"></div>
                <div class="filter" id="js_filters"></div>
                <div class="filter">
                    <div id="js_markerSlider" class="filter-slider"></div>
                </div>

                <hr>

                <div class="filter">
                    <div id="js_description"></div>
                </div>
                <!-- end explore interface -->
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="tool-transit-head">
            <h4 class="panel-title"><a role="button" data-toggle="collapse" href="#tool-transit" aria-expanded="true" aria-controls="tool-transit">Getting Around</a></h4>
        </div>
        <div id="tool-transit" class="panel-collapse collapse" role="tabpanel" aria-labelledby="tool-transit-head" data-story-layer="transit">
            <div class="panel-body">
                <!-- start transit interface -->
                <form>
                    <div id="transit-source">
                        <div class="btn-group" role="group" aria-label="Mode to display on the map.">
                            <button type="button" class="btn btn-default btn-sm active" data-source="data/directions-s.json">City Center</button>
                            <button type="button" class="btn btn-default btn-sm" data-source="data/directions-l.json">Metro Area</button>
                        </div>
                    </div>

                    <div id="map-mode">
                        <div class="btn-group" role="group" aria-label="Mode to display on the map.">
                            <button type="button" class="btn btn-default btn-sm active" data-mode="mode">Fastest Transit</button>
                            <button type="button" class="btn btn-default btn-sm" data-mode="time">Travel Time</button>
                        </div>
                    </div>

                    <div id="transit-modes">
                        <strong>Include Transit Modes</strong>
                        <div class="checkbox">
                            <label><input type="checkbox" value="bike" checked> Hubway</label>
                        </div>
                        <div class="checkbox">
                            <label><input type="checkbox" value="mbta_subway" checked> Subway</label>
                        </div>
                        <div class="checkbox">
                            <label><input type="checkbox" value="mbta_bus" checked> Bus</label>
                        </div>
                        <div class="checkbox">
                            <label><input type="checkbox" value="mbta_commuter" checked> Commuter Line</label>
                        </div>
                    </div>

                    <div id="bike-speed">
                        <p><strong>Bike Speed</strong> Time between bike stations is estimated based on Hubways data, but you can fine tune which data to use.</p>
                        <div class="radio">
                            <label><input type="radio" name="bikespeed" value="0" checked> Average Hubway member (~8.6 miles per hour)</label>
                        </div>
                        <div class="radio">
                            <label><input type="radio" name="bikespeed" value="1"> Average Hubway casual user (~6.8 miles per hour)</label>
                        </div>
                        <div class="radio">
                            <label><input type="radio" name="bikespeed" value="2"> Google estimated bike time (~9.4 miles per hour)</label>
                        </div>
                    </div>
                </form>
                <!-- end transit interface -->
            </div>
        </div>
    </div>
</div>
</body>
</html>
