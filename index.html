<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <title>Hubway</title>

    <link rel="stylesheet" href="external/bootstrap/3.3.7/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="external/leaflet/1.0.3/leaflet.css" type="text/css">
    <link rel="stylesheet" href="story/story.css" type="text/css">

    <!-- libraries for page-->
    <script src="external/jquery/2.1.1/jquery.js"></script>
    <script src="external/jquery.easing/1.4.0/jquery.easing.js"></script>
    <script src="external/bootstrap/3.3.7/bootstrap.js"></script>
    <script src="external/leaflet/1.0.3/leaflet.js"></script>
    <script src="external/jquery.mousewheel/3.1.13/jquery.mousewheel.js"></script>

    <!-- for transit -->
    <script src="external/d3/4.6.0/d3.js"></script> <!-- potentially simplify, use geo shape, path, scale, ?? -->
    <script src="external/d3-contour/d3-contour.js"></script>
    <script src="external/leaflet-curve/leaflet.curve.js"></script>

    <!-- for exploration -->
    <script src="external/jdataview/2.5.0/jdataview.js"></script>
    <script src="external/jbinary/2.1.3/jbinary.js"></script>

    <!-- local javascript for transit -->
    <script src="directions/transit-layer.js"></script>

    <!-- for explore -->
    <script src="datasource.js"></script>
    <script src="explore.js"></script>

    <!-- for page -->
    <script src="story/story.js"></script>
    <script src="story/story-data.js"></script>
</head>
<body>
<div id="map"></div>
<div id="sidebar-tabs">
    <!-- TODO: replace with a little logo and an about link? -->
    <h1>Hubway Challenge</h1>
    <ul class="nav nav-tabs nav-justified">
        <li role="presentation" class="active"><a href="#" data-story-mode="story">Findings</a></li>
        <li role="presentation"><a href="#" data-story-mode="explore">Explore</a></li>
    </ul>
</div>
<div class="sidebar" id="sidebar-story">
    <div id="story">
        <div class="story-container">
            <div class="story-pane" data-pane="intro">
                <h2>What is extraordinary?</h2>
                <div class="story-body">
                    <p>As engineers and scientists with a keen interest in civic responsibility and public policy, we
                        searched through the last six years of Hubway data to find the unusual and the extraordinary.
                        With the curiosity of a five-year old, we asked "Where?" and “Why?” and "How?" at every turn of
                        our exploration. Please join us on our adventure through five million Hubway trips as we share
                        what we asked, what we learned, and what we built.</p>
                </div>
            </div>
            <div class="story-pane" data-pane="under-util-1">
                <h2>Are any stations underutilized inside the city?</h2>
                <div class="story-body">
                    <p>Plotting total <a data-story-alt="default">starts</a> and <a data-story-alt="stops">stops</a>
                        for each station confirms an intuitive result: stations in the center of the Hubway network 
                        typically have the highest number of trips, and stations at
                        the edge of the Hubway network tend to have the fewest. We wondered if any outlier stations 
                        break this pattern: are there any stations inside the city that are underused relative to 
                        other nearby stations? If so, why?</p>
                </div>
            </div>
            <div class="story-pane" data-pane="under-util-2">
                <h2>Are any stations underutilized inside the city?</h2>
                <div class="story-body">
                    <p>To answer this question, we measured each station’s “utilization” by counting the number of
                        trip starts and ends and dividing by the number of docks and hours.</p>
                        
                    <p>Then, we searched for stations with unusually small “utilization” rates by grouping (clustering)
                        together stations and searching for small circles surrounded by
                        large circles.</p>
                        
                    <p>We found several unusually underutilized stations that are at least one year old: 
                        <a data-story-alt="danaPark">Dana Park</a>, in Cambridgeport; 
                        <a data-story-alt="eastCambridge">Binney St./Sixth St and Kendall St.</a> in East Cambridge; 
                        and <a data-story-alt="brookline">Brookline at Burlington St.</a>, near Fenway.</p>
                </div>
            </div>

            <div class="story-pane" data-pane="under-util-dana-park">
                <h2>Underutilization: Dana Park, Cambridgeport</h2>
                <div class="story-body">
                    <p>We estimated average commute times based on the Hubway data and combined this information with
                        walking and public transit data to determine the fastest mode of transportation from any
                        arbitrary start location in the greater Boston area to any other location. From Cambridgeport,
                        Hubway often is the fastest mode of transportation to Somerville, Cambridge, Boston, and
                        Brookline. Only a few distant destinations, like Chelsea and East Boston, are faster to get to
                        via subway. Given this time advantage, why is the Dana Park station utilized so little relative
                        to other nearby stations?</p>
                </div>
            </div>

            <div class="story-pane" data-pane="under-util-east-cambridge">
                <h2>Underutilization: East Cambridge</h2>
                <div class="story-body">
                    <p>East Cambridge exhibits similar trends to Cambridgeport: it is relatively underserved by public 
                    transportation based on commute times, and Hubway often is the fastest mode of transit. Why are the 
                    Kendall area stations underused?</p>
                </div>
            </div>
            
            <div class="story-pane" data-pane="under-util-brookline">
                <h2>Underutilization: Brookline at Burlington St., Boston</h2>
                <div class="story-body">
                    <p>Brookline at Burlington St., near Fenway, is an unusual station: in addition to 
                    its <a data-story-alt="default">low utilization</a>, <a data-story-alt="popular">the most popular routes
                    from this station</a> are to relatively far stations. Perhaps the location of this station on a dead-end 
                    street makes it inconvenient to access or difficult to discover?</p>
                </div>
            </div>
            
            <div class="story-pane" data-pane="under-util-boston">
                <h2>Underutilization: Winter Availability in Boston</h2>
                <div class="story-body">
                    <p>Analyzing utilization rates also led us to wonder why Boston shuts down some of its Hubway stations 
                    in the winter when Cambridge does not. <a data-story-alt="default">Utilization rates for Cambridge and Boston</a>
                    are fairly similar, and although <a data-story-alt="winter">winter utilization</a> is the lowest of any time 
                    of the year, riders still use Hubway throughout the winter in Cambridge. Why not keep the Boston stations open?</p>
                </div>
            </div>
                        
            <div class="story-pane" data-pane="potential-new-station-lead">
                <h2>Why not put a station here?</h2>
                <div class="story-body">
                    <p>In addition to searching for potentially under-utilized stations, we also wondered if any communities might 
                    benefit from the installation of a new Hubway station. For example, because there are relatively few 
                    stations in East Somerville, <a data-story-alt="default">walking currently is the fastest way to 
                    travel from Inman Square to large parts of East Somerville</a>. Are there other areas where walking 
                    is the often the fastest mode of travel? Could these areas benefit from a Hubway station?</p>
                    
                    <p>Combining travel times from the Hubway dataset with walking 
                    and public transit estimates, we identified areas in <a data-story-alt="east-somerville">East Somerville near Winter Hill</a> and 
                    <a data-story-alt="brookline">parts of Brookline along Kent Street</a> where new stations could help reduce commute times.</p>
                    
                    <p>Our model is pessimistic and always assumes that someone 
                    shows up halfway between buses during normal (median) operating schedules. During peak-time travel times 
                    or with well-planned trips, transit rides can still be more convenient.</p>
                    </p>
                </div>
            </div>
                        
                        
            <div class="story-pane" data-pane="tidbits">
                <h2>Fun Facts and Other Tidbits</h2>
                <div class="story-body">
                    <p>Although we've asked a few key questions to highlight potentially underutilized stations and
                        under-served areas, we've left a lot to explore! Below, we've included some of the fun facts
                        that we stumbled upon during our own adventure in finding the extraordinary in the Hubway data.
                        Read on to learn what we've found, or <a href="#" data-story-mode="explore">conduct your own
                            exploration</a>!</p>
                </div>
            </div>

            <div class="story-pane" data-pane="tidbits-city-struct">
                <h2>See the city in a transit map</h2>
                <div class="story-body">
                    <p>See the <a data-story-alt="default">city structure</a> spiraling out from South Station. Or the
                        travel time from <a data-story-alt="harvard">Harvard Square</a> reveals bus routes serving
                        the neighborhoods to the west.
                </div>
            </div>

            <div class="story-pane" data-pane="tidbits-city-popular">
                <h2>What are popular Hubway trips?</h2>
                <div class="story-body">
                    <p>Popular routes around schools such as <a data-story-alt="default">MIT</a> and
                        <a data-story-alt="tufts">Tufts</a> are heavily used and frequently mirror shuttle routes that
                        have long been offered by the schools.</p>
                </div>
            </div>
                        
        </div>
        <div class="story-nav story-prev"><a href="#" data-story-nav="prev">Previous</a></div>
        <div class="story-nav story-next"><a href="#" data-story-nav="next">Next</a></div>
    </div>
</div>
<div class="sidebar" id="sidebar-tools" style="display:none;">
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="tool-explore-head">
            <h4 class="panel-title"><a role="button" data-toggle="collapse" href="#tool-explore" aria-expanded="true" aria-controls="tool-explore">Explore Trips</a></h4>
        </div>
        <div id="tool-explore" class="panel-collapse collapse" role="tabpanel" aria-labelledby="tool-explore-head" data-story-layer="explore">
            <div class="panel-body">
                <!-- start explore interface -->
                <div class="filter" role="button">
                    <button class="btn btn-default btn-sm js_query" id="js_stations_reset">Reset</button>

                    <div class="btn-group" role="button">
                        <button class="btn btn-default btn-sm btn-group dropdown-toggle" type="button" id="js_stations" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Stations
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenu1" id="js_stationList"></ul>
                    </div>

                    <div class="btn-group" role="button">
                        <button class="btn btn-default btn-sm btn-group dropdown-toggle" type="button" id="js_kMeans" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Clusters
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenu2" id="js_kMeansGroups"></ul>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-default btn-sm btn-group" id="js_markerSize_minus">-</button>
                        <button class="btn btn-default btn-sm btn-group" id="js_markerSize_plus">+</button>
                    </div>
                    
                </div>

                <div class="filter" id="js_queries"></div>
                <div class="filter" id="js_filters"></div>
                <div class="filter">
                    <div id="js_markerSlider" class="filter-slider"></div>
                </div>

                <hr>

                <div class="filter">
                    <div id="js_description"></div>
                </div>
                <!-- end explore interface -->
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="tool-transit-head">
            <h4 class="panel-title"><a role="button" data-toggle="collapse" href="#tool-transit" aria-expanded="true" aria-controls="tool-transit">Getting Around</a></h4>
        </div>
        <div id="tool-transit" class="panel-collapse collapse" role="tabpanel" aria-labelledby="tool-transit-head" data-story-layer="transit">
            <div class="panel-body">
                <!-- start transit interface -->
                <p>Click where you will be starting your trip, and see the best transit mode and travel times.</p>

                <form>
                    <div id="transit-source">
                        <div class="btn-group" role="group" aria-label="Mode to display on the map.">
                            <button type="button" class="btn btn-default btn-sm active" data-source="data/directions-s.json">City Center</button>
                            <button type="button" class="btn btn-default btn-sm" data-source="data/directions-l.json">Metro Area</button>
                        </div>
                    </div>

                    <div id="map-mode">
                        <div class="btn-group" role="group" aria-label="Mode to display on the map.">
                            <button type="button" class="btn btn-default btn-sm active" data-mode="mode">Fastest Transit</button>
                            <button type="button" class="btn btn-default btn-sm" data-mode="time">Travel Time</button>
                        </div>
                    </div>

                    <div id="transit-modes">
                        <strong>Include Transit Modes</strong>
                        <div class="checkbox">
                            <label><input type="checkbox" value="bike" checked> Hubway</label>
                        </div>
                        <div class="checkbox">
                            <label><input type="checkbox" value="mbta_subway" checked> Subway</label>
                        </div>
                        <div class="checkbox">
                            <label><input type="checkbox" value="mbta_bus" checked> Bus</label>
                        </div>
                        <div class="checkbox">
                            <label><input type="checkbox" value="mbta_commuter" checked> Commuter Line</label>
                        </div>
                    </div>

                    <div id="bike-speed">
                        <p><strong>Bike Speed</strong> Time between bike stations is estimated based on Hubways data, but you can fine tune which data to use.</p>
                        <div class="radio">
                            <label><input type="radio" name="bikespeed" value="0" checked> Average Hubway member (~8.6 miles per hour)</label>
                        </div>
                        <div class="radio">
                            <label><input type="radio" name="bikespeed" value="1"> Average Hubway casual user (~6.8 miles per hour)</label>
                        </div>
                        <div class="radio">
                            <label><input type="radio" name="bikespeed" value="2"> Google estimated bike time (~9.4 miles per hour)</label>
                        </div>
                    </div>
                </form>
                <!-- end transit interface -->
            </div>
        </div>
    </div>
</div>
</body>
</html>
